# colibre-skirt
This private, read-only repository contains our up-to-date framework for postprocessing COLIBRE simulations with the SKIRT 3D dust radiative transfer code. We expect that some settings/choices of the postprocessing pipeline are going to change over the coming weeks. To run SKIRT simulations, you will have to install SKIRT (skirt.ugent.be) and follow the four steps outlined here. Note that as of 25.3.2025, some of the features of our COLIBRE-SKIRT pipeline are not incorporated into the main branch yet. To use those features you need to clone my personal SKIRT fork (https://github.com/andreagebek/SKIRT9).

## 1. Defining the galaxy sample
First, a specific galaxy sample is required. There are various ways to generate such a sample, for now the galaxy samples are generated by running the `getGalaxySamples.py` script on a machine that has access to COLIBRE data. This script will save the halo IDs, stellar masses, and stellar half-mass radii given a specific COLIBRE simulation box, set of snapshots, and selection criteria.

## 2. Saving the particle data
To run SKIRT we'll need various informations from the stars and gas particle files. Those have to be generated by running `saveParticleData.py` on a machine with access to COLIBRE data. The script stores the necessary particle data in `.txt` files for all galaxies that have been selected in step 1. Once these particle data are generated, you can download those and the galaxy sample files to whatever machine you want to run SKIRT there. No further interfacing with raw COLIBRE data is required from now on.

## 3. The SKIRT configuration file
All settings of the SKIRT simulation are given in the `template_v4.0.ski` file. For your own work you will probably need to adjust this file, e.g. to customize the output you want (i.e. spectra/images/datacubes). Feel free to reach out to us in case you have any questions on how to do this!

## 4. Running SKIRT for a set of galaxies
To iterate over the galaxies that are in the sample files, run the `runSKIRT.py` script on a machine where SKIRT is installed. This will iterate over the galaxies with a specified number of SKIRT simulations in parallel, using the SKIRT parameters specified in `template_v4.0.ski`. The output of the SKIRT simulation (if you don't change the configuration file, this is simply a set panchromatic SEDs in various apertures for every galaxy) will be placed in this folder.

## Installation instructions

`git clone https://andreagebek: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@github.com/andreagebek/colibre-skirt.git`


## Contact
In case of questions or comments, please reach out to Andrea Gebek (andrea.gebek@ugent.be).